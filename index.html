<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />

    <!-- Google Search Console Verification -->
<meta name="google-site-verification" content="AQpDPy8WbkFqIIKiou7sRhunhgR5IXi6bxBrKq3PoYQ" />

    <title>Wisconsin DCF 150 Child Support Calculator</title>

<style>
    body {
        font-family: 'Segoe UI', Arial, sans-serif;
        background: #f4f7fa;
        margin: 0;
        padding: 0;
        color: #333;
    }
    header {
        background: #0b63d1;
        color: #fff;
        padding: 22px 20px;
        text-align: center;
        font-size: 24px;
        font-weight: 600;
        letter-spacing: 0.3px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }
    .container {
        max-width: 1120px;
        margin: 24px auto 40px;
        padding: 0 16px;
    }
    .disclaimer-top {
        font-size: 12px;
        color: #555;
        background: #fff7e0;
        border: 1px solid #f1d48a;
        border-radius: 6px;
        padding: 8px 10px;
        margin-bottom: 16px;
    }
    .layout {
        display: flex;
        gap: 24px;
        align-items: flex-start;
    }
    .main-column {
        flex: 3;
    }
    .summary-column {
        flex: 1.3;
        position: sticky;
        top: 90px;
    }
    .section {
        background: #fff;
        padding: 22px 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    .section h2 {
        margin-top: 0;
        color: #0b63d1;
        font-size: 19px;
        font-weight: 600;
        margin-bottom: 6px;
    }
    .subnote {
        font-size: 13px;
        color: #555;
        margin-bottom: 10px;
    }
    .legalnote {
        font-size: 12px;
        color: #777;
        margin-top: 4px;
    }
    .tooltip {
        text-decoration: underline dotted;
        cursor: help;
        color: #0b63d1;
        font-weight: 500;
    }
    .row {
        display: flex;
        flex-wrap: wrap;
        gap: 18px;
    }
    .col {
        flex: 1 1 260px;
    }
    label {
        display: block;
        margin: 8px 0 4px;
        font-weight: 600;
        font-size: 14px;
    }
    input, select {
        width: 100%;
        padding: 8px 10px;
        border: 1px solid #c9cdd1;
        border-radius: 6px;
        font-size: 14px;
        box-sizing: border-box;
    }
    input[type="range"] {
        width: 100%;
        padding: 0;
    }
    .button-bar {
        text-align: center;
        margin-top: 18px;
    }
    .btn {
        padding: 10px 18px;
        border-radius: 6px;
        border: none;
        cursor: pointer;
        font-size: 14px;
        margin: 5px;
        font-weight: 600;
    }
    .btn-secondary {
        background: #777;
        color: #fff;
    }
    #summaryBox {
        background: #eef3fa;
        border-left: 4px solid #0b63d1;
        padding: 18px 16px;
        border-radius: 6px;
        font-family: Consolas, monospace;
        white-space: pre-line;
        min-height: 220px;
        font-size: 13px;
    }

    /* Quick summary card */
    .summary-card {
        background: #ffffff;
        padding: 18px 16px;
        border-radius: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        border: 1px solid #d7dde7;
    }
    .summary-card h3 {
        margin-top: 0;
        margin-bottom: 6px;
        font-size: 18px;
        color: #0b63d1;
    }
    .quick-direction {
        font-size: 13px;
        color: #555;
        margin-bottom: 6px;
    }
    .quick-total {
        font-size: 24px;
        font-weight: 700;
        margin-bottom: 10px;
    }
    .quick-split {
        display: flex;
        justify-content: space-between;
        gap: 12px;
        margin-bottom: 8px;
    }
    .quick-person {
        flex: 1;
        background: #f7f9fd;
        border-radius: 8px;
        padding: 8px 10px;
    }
    .quick-name {
        font-size: 13px;
        font-weight: 600;
        margin-bottom: 4px;
    }
    .quick-amount {
        font-size: 16px;
        font-weight: 700;
    }
    .quick-note {
        font-size: 11px;
        color: #777;
        margin-top: 6px;
    }

    .amount-owe {
        color: #c53030; /* red */
    }
    .amount-rec {
        color: #0b8a3c; /* green */
    }
    .amount-neutral {
        color: #555;
    }

    footer {
        font-size: 11px;
        color: #666;
        padding: 14px 16px 24px;
        text-align: center;
    }

    @media (max-width: 900px) {
        .layout {
            flex-direction: column;
        }
        .summary-column {
            position: static;
            margin-top: 8px;
        }
    }
</style>
</head>

<body>

<header>Wisconsin Child Support Calculator — WI DCF 150</header>

<div class="container">

    <div class="disclaimer-top">
        This calculator provides an unofficial estimate based on Wisconsin DCF 150 guidelines. It is for educational purposes only
        and is not legal advice. Actual court-ordered support may differ.
    </div>

    <div class="layout">

        <!-- ==================== MAIN COLUMN ==================== -->
        <div class="main-column">

            <!-- Parent Income -->
            <div class="section">
                <h2>Parent Income</h2>
                <div class="subnote">
                    Gross income is defined in <span class="tooltip" title="DCF 150.02(13) — Gross income includes all income from all sources before mandatory deductions.">DCF 150.02(13)</span>.
                    Enter yearly gross income for each parent.
                </div>

                <div class="row">
                    <div class="col">
                        <label>Parent 1 Name</label>
                        <input id="nameA" value="Parent 1">
                    </div>
                    <div class="col">
                        <label>Parent 2 Name</label>
                        <input id="nameB" value="Parent 2">
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label>Parent 1 Yearly Gross Income ($)</label>
                        <input id="incA" type="number" step="0.01" value="0">
                    </div>
                    <div class="col">
                        <label>Parent 2 Yearly Gross Income ($)</label>
                        <input id="incB" type="number" step="0.01" value="0">
                    </div>
                </div>
            </div>

            <!-- Placement with slider -->
            <div class="section">
                <h2>Placement (Overnights per Year)</h2>
                <div class="subnote">
                    Shared-placement obligations are set under <span class="tooltip" title="DCF 150.04(2) — Each parent’s support is adjusted by 150% of the base and the other parent’s placement percentage.">DCF 150.04(2)</span>.
                    Use the slider to adjust Parent 1's overnights; Parent 2's share updates automatically.
                </div>

                <label>Parent 1 Overnights per Year</label>
                <input id="overnightsA" type="range" min="0" max="365" value="182">
                <div class="subnote" id="overnightsInfo">
                    Parent 1: <span id="placeAInfo">182 nights (~49.86%)</span> •
                    Parent 2: <span id="placeBInfo">183 nights (~50.14%)</span>
                </div>
            </div>

            <!-- Case Details -->
            <div class="section">
                <h2>Case Details</h2>

                <div class="row">
                    <div class="col">
                        <label>Number of Children in This Case</label>
                        <input id="caseKids" type="number" value="1">
                    </div>
                    <div class="col">
                        <label>SSDI Dependent Benefit ($ / month)</label>
                        <input id="ssdiDep" type="number" value="0">
                    </div>
                </div>

                <div class="row">
                    <div class="col">
                        <label>Which Parent Receives the SSDI Benefit?</label>
                        <select id="ssdiRecipient">
                            <option value="none">None / Not Applicable</option>
                            <option value="A">Parent 1</option>
                            <option value="B">Parent 2</option>
                        </select>
                    </div>
                </div>

                <div class="row" style="margin-top:10px;">
                    <div class="col">
                        <label>Parent 1 Prior Support Order ($ / month)</label>
                        <input id="priorA" type="number" value="0">
                    </div>
                    <div class="col">
                        <label>Parent 2 Prior Support Order ($ / month)</label>
                        <input id="priorB" type="number" value="0">
                    </div>
                </div>

                <div class="legalnote">
                    Serial-family adjustments follow <span class="tooltip" title="DCF 150.04(1) — Existing legal obligations reduce income available for a new support order.">DCF 150.04(1)</span>.
                </div>
            </div>

            <!-- Insurance -->
            <div class="section">
                <h2>Health Insurance</h2>

                <div class="subnote">
                    Credits for health insurance are governed by 
                    <span class="tooltip" title="DCF 150.05 — Premiums paid by either parent may be credited in calculating support.">DCF 150.05</span>.
                </div>

                <label>Insurance Calculation Method</label>
                <select id="insuranceMode">
                    <option value="none">No Private Insurance / Ignore Premiums</option>
                    <option value="proportional">Option A – Proportional Income-Share Credit</option>
                    <option value="worksheet">Option B – Integrated Worksheet Adjustment (simplified)</option>
                </select>

                <div class="row" style="margin-top:10px;">
                    <div class="col">
                        <label>Parent 1 Monthly Premium ($)</label>
                        <input id="premA" type="number" value="0">
                    </div>
                    <div class="col">
                        <label>Parent 2 Monthly Premium ($)</label>
                        <input id="premB" type="number" value="0">
                    </div>
                </div>
            </div>

            <!-- Garnishment Context -->
            <div class="section">
                <h2>Garnishment Context (Optional)</h2>
                <div class="subnote">
                    Federal/Wisconsin limits: 50/55/60/65% of disposable income depending on intact family and arrears.
                    This section checks whether the estimated support fits within those limits and caps the result.
                </div>

                <div class="row">
                    <div class="col">
                        <label>Parent 1 Monthly Disposable Income ($)</label>
                        <input id="dispA" type="number" value="0">
                        <label>Parent 1 Intact Family Living With Them?</label>
                        <select id="intactA">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                        <label>Parent 1 Has Arrears?</label>
                        <select id="arrearsA">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>

                    <div class="col">
                        <label>Parent 2 Monthly Disposable Income ($)</label>
                        <input id="dispB" type="number" value="0">
                        <label>Parent 2 Intact Family Living With Them?</label>
                        <select id="intactB">
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                        <label>Parent 2 Has Arrears?</label>
                        <select id="arrearsB">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Judicial Deviation -->
            <div class="section">
                <h2>Judicial Deviation (Optional)</h2>
                <div class="subnote">
                    Courts may deviate from guidelines per 
                    <span class="tooltip" title="DCF 150.03(3) / Wis. Stat. 767.511 — Courts may deviate based on factors such as special needs, childcare, travel, and financial resources.">
                        DCF 150.03(3) / Wis. Stat. 767.511
                    </span>.
                </div>

                <label>Deviation Amount to Apply (+ / − $ / month)</label>
                <input id="deviation" type="number" value="0">
            </div>

            <!-- Detailed Summary -->
            <div class="section">
                <h2>Detailed Summary (Attorney View)</h2>
                <div id="summaryBox">Enter values above. Results update automatically.</div>
                <div class="button-bar">
                    <button class="btn btn-secondary" onclick="window.print()">Print / PDF</button>
                </div>
            </div>

        </div>

        <!-- ==================== SUMMARY COLUMN ==================== -->
        <div class="summary-column">
            <div class="summary-card">
                <h3>Estimated Monthly Support</h3>
                <div id="quickDirection" class="quick-direction">No payment estimated.</div>
                <div id="quickTotal" class="quick-total amount-neutral">$0.00</div>

                <div class="quick-split">
                    <div class="quick-person">
                        <div id="quickNameA" class="quick-name">Parent 1</div>
                        <div id="quickA" class="quick-amount amount-neutral">$0.00</div>
                    </div>
                    <div class="quick-person">
                        <div id="quickNameB" class="quick-name">Parent 2</div>
                        <div id="quickB" class="quick-amount amount-neutral">$0.00</div>
                    </div>
                </div>

                <div class="quick-note">
                    Green (+) = receives. Red (−) = owes. Values update automatically as you change the inputs.
                </div>
            </div>
        </div>

    </div> <!-- /layout -->
</div> <!-- /container -->

<footer>
    This calculator uses public Wisconsin DCF 150 formulas in a simplified way and does not replace individual legal advice or a court
    determination. Use at your own discretion and consult a licensed Wisconsin family law attorney for specific guidance.
</footer>

<script>
/* ---------- Percentage helpers ---------- */
function pctForKids(k) {
    if (k <= 1) return 0.17;
    if (k === 2) return 0.25;
    if (k === 3) return 0.29;
    if (k === 4) return 0.31;
    return 0.34;
}
function highIncomePercents(k) {
    if (k <= 1) return [0.17, 0.14, 0.10];
    if (k === 2) return [0.25, 0.22, 0.19];
    if (k === 3) return [0.29, 0.27, 0.24];
    if (k === 4) return [0.31, 0.29, 0.26];
    return [0.34, 0.32, 0.29];
}
function calcHighIncomeBase(monthlyInc, kids) {
    const [t1, t2, t3] = highIncomePercents(kids);
    const cap1 = 7000, cap2 = 11000;
    if (monthlyInc <= cap1) {
        return monthlyInc * t1;
    } else if (monthlyInc <= cap2) {
        return cap1 * t1 + (monthlyInc - cap1) * t2;
    } else {
        return cap1 * t1 + (cap2 - cap1) * t2 + (monthlyInc - cap2) * t3;
    }
}
function calcNormalBase(monthlyInc, kids) {
    return monthlyInc * pctForKids(kids);
}

/* ---------- Main calculation ---------- */
function runCalc() {
    // Names
    const nameA = (document.getElementById('nameA').value || 'Parent 1').trim();
    const nameB = (document.getElementById('nameB').value || 'Parent 2').trim();
    document.getElementById('quickNameA').textContent = nameA;
    document.getElementById('quickNameB').textContent = nameB;

    // Yearly to monthly gross
    const yearA = parseFloat(document.getElementById('incA').value) || 0;
    const yearB = parseFloat(document.getElementById('incB').value) || 0;
    const grossA = yearA / 12;
    const grossB = yearB / 12;

    // Placement via overnights slider
    let nightsA = parseInt(document.getElementById('overnightsA').value, 10);
    if (isNaN(nightsA)) nightsA = 0;
    if (nightsA < 0) nightsA = 0;
    if (nightsA > 365) nightsA = 365;
    const nightsB = 365 - nightsA;
    const placeA = (nightsA / 365) * 100;
    const placeB = 100 - placeA;

    document.getElementById('overnightsA').value = nightsA;
    document.getElementById('placeAInfo').textContent =
        `${nightsA} nights (~${placeA.toFixed(2)}%)`;
    document.getElementById('placeBInfo').textContent =
        `${nightsB} nights (~${placeB.toFixed(2)}%)`;

    // Case details
    const kids = Math.max(1, parseInt(document.getElementById('caseKids').value, 10) || 1);
    const ssdiDep = parseFloat(document.getElementById('ssdiDep').value) || 0;
    const ssdiRecipient = document.getElementById('ssdiRecipient').value;
    const priorA = parseFloat(document.getElementById('priorA').value) || 0;
    const priorB = parseFloat(document.getElementById('priorB').value) || 0;

    // Insurance
    const insuranceMode = document.getElementById('insuranceMode').value;
    const premA = parseFloat(document.getElementById('premA').value) || 0;
    const premB = parseFloat(document.getElementById('premB').value) || 0;

    // Garnishment context
    const dispA = parseFloat(document.getElementById('dispA').value) || 0;
    const dispB = parseFloat(document.getElementById('dispB').value) || 0;
    const intactA = document.getElementById('intactA').value === 'yes';
    const intactB = document.getElementById('intactB').value === 'yes';
    const arrearsA = document.getElementById('arrearsA').value === 'yes';
    const arrearsB = document.getElementById('arrearsB').value === 'yes';

    // Deviation
    const deviation = parseFloat(document.getElementById('deviation').value) || 0;

    // Serial-family adjustments
    let effA = grossA;
    let effB = grossB;
    let serialTxt = '';

    if (priorA > 0) {
        const newEffA = Math.max(0, grossA - priorA);
        serialTxt += `${nameA}: prior order $${priorA.toFixed(2)} → effective income $${newEffA.toFixed(2)}\n`;
        effA = newEffA;
    }
    if (priorB > 0) {
        const newEffB = Math.max(0, grossB - priorB);
        serialTxt += `${nameB}: prior order $${priorB.toFixed(2)} → effective income $${newEffB.toFixed(2)}\n`;
        effB = newEffB;
    }
    if (!serialTxt) {
        serialTxt = 'No serial-family reduction applied.\n';
    }

    // Base support using high-income tiers if applicable
    let baseA, baseB;
    let baseTxt = '';
    if (effA > 7000) {
        baseA = calcHighIncomeBase(effA, kids);
        baseTxt += `${nameA} treated as high-income (> $7,000/month). `;
    } else {
        baseA = calcNormalBase(effA, kids);
    }
    if (effB > 7000) {
        baseB = calcHighIncomeBase(effB, kids);
        baseTxt += `${nameB} treated as high-income (> $7,000/month). `;
    } else {
        baseB = calcNormalBase(effB, kids);
    }
    baseTxt += `\nBase support (before shared placement): ${nameA} $${baseA.toFixed(2)}, ${nameB} $${baseB.toFixed(2)}\n`;

    // Shared placement obligations
    const obligA = baseA * 1.5 * (placeB / 100);
    const obligB = baseB * 1.5 * (placeA / 100);

    let payer = 'A';
    let payName = nameA;
    let otherName = nameB;
    let rawSupport = obligA - obligB;
    if (rawSupport < 0) {
        payer = 'B';
        payName = nameB;
        otherName = nameA;
        rawSupport = Math.abs(rawSupport);
    }

    // Insurance adjustments (to payer)
    let insuranceTxt = '';
    let insuranceAdj = 0;
    if (insuranceMode === 'proportional') {
        const totalGross = grossA + grossB;
        if (totalGross > 0) {
            const shareA = grossA / totalGross;
            const shareB = grossA + grossB === 0 ? 0 : grossB / totalGross;

            if (premA > 0) {
                const owedByB = premA * shareB;
                insuranceAdj += (payer === 'A') ? -owedByB : owedByB;
                insuranceTxt += `${nameA} pays $${premA.toFixed(2)} premium; ${nameB} share ≈ $${owedByB.toFixed(2)}.\n`;
            }
            if (premB > 0) {
                const owedByA = premB * shareA;
                insuranceAdj += (payer === 'B') ? -owedByA : owedByA;
                insuranceTxt += `${nameB} pays $${premB.toFixed(2)} premium; ${nameA} share ≈ $${owedByA.toFixed(2)}.\n`;
            }
        } else {
            insuranceTxt += 'Proportional method selected but total gross income is zero.\n';
        }
    } else if (insuranceMode === 'worksheet') {
        let adj = 0;
        if (payer === 'A' && premA > 0) adj = -premA * 0.15;
        if (payer === 'B' && premB > 0) adj = -premB * 0.15;
        insuranceAdj += adj;
        insuranceTxt += `Worksheet method: adjustment for ${payName} ≈ $${adj.toFixed(2)}.\n`;
    } else {
        insuranceTxt += 'Insurance premiums ignored (BadgerCare / not considered).\n';
    }

    // SSDI dependent credit
    let ssdiCredit = 0;
    let ssdiTxt = '';
    if (ssdiDep > 0 && (ssdiRecipient === 'A' || ssdiRecipient === 'B')) {
        if (payer === 'A' && ssdiRecipient === 'B') {
            ssdiCredit = ssdiDep;
            ssdiTxt = `SSDI dependent benefit of $${ssdiDep.toFixed(2)} credited against ${nameA}'s obligation (benefit received by ${nameB}).`;
        } else if (payer === 'B' && ssdiRecipient === 'A') {
            ssdiCredit = ssdiDep;
            ssdiTxt = `SSDI dependent benefit of $${ssdiDep.toFixed(2)} credited against ${nameB}'s obligation (benefit received by ${nameA}).`;
        } else {
            ssdiTxt = `SSDI dependent benefit $${ssdiDep.toFixed(2)} entered, but under this simplified model no direct credit is applied because the payer and recipient are the same.`;
        }
    } else if (ssdiDep > 0 && ssdiRecipient === 'none') {
        ssdiTxt = `SSDI dependent benefit $${ssdiDep.toFixed(2)} entered with no recipient selected; no credit applied.`;
    } else {
        ssdiTxt = 'No SSDI dependent benefit credit applied.';
    }

    // Uncapped final support
    let calcFinal = rawSupport + insuranceAdj - ssdiCredit + deviation;
    if (calcFinal < 0) calcFinal = 0;

    // Garnishment cap for payer
    let garnTxt = '';
    let garnCap = Infinity;
    const disp = (payer === 'A') ? dispA : dispB;
    const intact = (payer === 'A') ? intactA : intactB;
    const arrears = (payer === 'A') ? arrearsA : arrearsB;

    if (disp > 0) {
        let pct = 0.5;
        if (intact && arrears) pct = 0.55;
        if (!intact && !arrears) pct = 0.60;
        if (!intact && arrears) pct = 0.65;
        garnCap = disp * pct;
        const pctText = (pct * 100).toFixed(0) + '%';
        garnTxt += `Garnishment cap for ${payName}: ${pctText} of disposable $${disp.toFixed(2)} ≈ $${garnCap.toFixed(2)}.\n`;
    } else {
        garnTxt += `No disposable income entered for ${payName}; garnishment cap not evaluated.\n`;
    }

    // Enforce garnishment cap
    let final = Math.min(calcFinal, garnCap);
    if (!isFinite(garnCap)) final = calcFinal;

    if (isFinite(garnCap) && calcFinal > garnCap) {
        garnTxt += `Calculated support $${calcFinal.toFixed(2)} EXCEEDS this cap; estimated collectible amount is capped at ≈ $${final.toFixed(2)}.\n`;
    } else if (isFinite(garnCap)) {
        garnTxt += `Calculated support $${calcFinal.toFixed(2)} is within the garnishment cap. Estimated collectible amount: $${final.toFixed(2)}.\n`;
    }

    // Build detailed summary
    const summary =
`${nameA} yearly gross: $${yearA.toFixed(2)}  → monthly: $${grossA.toFixed(2)}
${nameB} yearly gross: $${yearB.toFixed(2)}  → monthly: $${grossB.toFixed(2)}

Placement (based on overnights):
${nameA}: ${nightsA} nights (~${placeA.toFixed(2)}%)
${nameB}: ${nightsB} nights (~${placeB.toFixed(2)}%)

=== Serial-Family Adjustment ===
${serialTxt}

=== Base Support (DCF 150.03 / 150.04) ===
${baseTxt}

=== Shared Placement (DCF 150.04(2)) ===
${nameA} obligation: $${obligA.toFixed(2)} / mo
${nameB} obligation: $${obligB.toFixed(2)} / mo
Raw difference (before insurance/SSDI/deviation): $${rawSupport.toFixed(2)} paid by ${payName} to ${otherName}

=== Insurance Adjustment (${insuranceMode}) ===
${insuranceTxt || 'No insurance adjustment.'}

=== SSDI Dependent Benefit ===
${ssdiTxt}

Judicial deviation applied: ${deviation >= 0 ? '+' : ''}$${deviation.toFixed(2)}

=== FINAL ESTIMATE (MONTHLY) ===
Guideline calculated support (uncapped): $${calcFinal.toFixed(2)} / month
Garnishment cap: ${isFinite(garnCap) ? '$' + garnCap.toFixed(2) : 'N/A'}
Estimated collectible support owed by ${payName}: $${final.toFixed(2)} / month

=== Garnishment Check (Optional) ===
${garnTxt}`;

    document.getElementById('summaryBox').textContent = summary;

    // Quick summary card (right side)
    const quickDirection = document.getElementById('quickDirection');
    const quickTotal = document.getElementById('quickTotal');
    const quickA = document.getElementById('quickA');
    const quickB = document.getElementById('quickB');

    let deltaA = 0, deltaB = 0;
    if (final > 0) {
        if (payer === 'A') {
            deltaA = -final;
            deltaB = final;
            quickDirection.textContent = `${nameA} → ${nameB}`;
        } else {
            deltaB = -final;
            deltaA = final;
            quickDirection.textContent = `${nameB} → ${nameA}`;
        }
    } else {
        quickDirection.textContent = 'No payment estimated.';
    }

    function formatDelta(d) {
        if (d > 0) return `+ $${d.toFixed(2)}`;
        if (d < 0) return `- $${Math.abs(d).toFixed(2)}`;
        return '$0.00';
    }
    function classForDelta(d) {
        if (d > 0) return 'quick-amount amount-rec';
        if (d < 0) return 'quick-amount amount-owe';
        return 'quick-amount amount-neutral';
    }

    quickA.textContent = formatDelta(deltaA);
    quickA.className = classForDelta(deltaA);

    quickB.textContent = formatDelta(deltaB);
    quickB.className = classForDelta(deltaB);

    if (final > 0) {
        quickTotal.textContent = `$${final.toFixed(2)}`;
        quickTotal.className = 'quick-total amount-owe'; // payment amount is always "owed"
    } else {
        quickTotal.textContent = '$0.00';
        quickTotal.className = 'quick-total amount-neutral';
    }
}

/* ---------- Wire up real-time events ---------- */
window.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('input, select').forEach(el => {
        el.addEventListener('input', runCalc);
        el.addEventListener('change', runCalc);
    });
    runCalc();
});
</script>

</body>
</html>

